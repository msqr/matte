<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC 
	"-//SPRING//DTD BEAN//EN" 
	"http://www.springframework.org/dtd/spring-beans.dtd">
<!--
	Copyright (c) 2007 Matt Magoffin
	
	This program is free software; you can redistribute it and/or 
	modify it under the terms of the GNU General Public License as 
	published by the Free Software Foundation; either version 2 of 
	the License, or (at your option) any later version.
	
	This program is distributed in the hope that it will be useful, 
	but WITHOUT ANY WARRANTY; without even the implied warranty of 
	MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU 
	General Public License for more details.
	
	You should have received a copy of the GNU General Public License 
	along with this program; if not, write to the Free Software 
	Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 
	02111-1307 USA
	
	$Id: web.xml,v 1.58 2007/08/27 04:04:21 matt Exp $
-->
<beans>
	
	<bean id="imageRepository" class="org.springframework.ws.samples.mtom.service.StubImageRepository"/>
	
	<bean class="org.springframework.ws.samples.mtom.ws.ImageRepositoryEndpoint">
		<constructor-arg ref="imageRepository"/>
	</bean>
	
	<bean class="org.springframework.ws.server.endpoint.mapping.PayloadRootAnnotationMethodEndpointMapping"/>
	
	<bean class="org.springframework.ws.server.endpoint.adapter.GenericMarshallingMethodEndpointAdapter">
		<constructor-arg ref="marshaller"/>
	</bean>
	
	<bean id="marshaller" class="org.springframework.oxm.jaxb.Jaxb2Marshaller">
		<property name="contextPath" value="org.springframework.ws.samples.mtom.schema"/>
		<property name="mtomEnabled" value="true"/>
	</bean>
	
	<bean id="mtom" class="org.springframework.ws.wsdl.wsdl11.DynamicWsdl11Definition">
		<property name="builder">
			<bean class="org.springframework.ws.wsdl.wsdl11.builder.XsdBasedSoap11Wsdl4jDefinitionBuilder">
				<property name="schema" value="/WEB-INF/schema.xsd"/>
				<property name="portTypeName" value="ImageRepository"/>
				<property name="locationUri" value="http://localhost:8080/mtom/"/>
			</bean>
		</property>
	</bean>
	
</beans>